/sc:design watchdot-app 웹앱을 만들어야해, watchdot-app-ui-prompt.md를 확인해서 frontend를 먼저 개발하고 초기화면 레퍼런스는 watchdot-app-ui-wireframe.png를 확인해

## 컨텍스트

- @CLAUDE.md - 전체 시스템의 내용
- @watchdot-app-ui-prompt.md - UI 생성 프롬프트
- @watchdot-app-ui-wireframe.png - UI 와이어프레임
- @watchdot-service-server-api-doc.md - watchdot-service-server API 문서

## 개발 사항

- @CLAUDE.md 파일을 조회해서 전체 시스템의 구조를 파악해야해
- React Native - Expo로 개발해
- 파일명과 폴더명은 케밥케이스를 사용해
- atomic components 아키텍처 구조를 사용해
- 디자인 시템: https://reactnativereusables.com
- npm이나 yarn 대신 bun을 사용
- 개발을 할때마다 git commit 을 하고 단계별 완료된 사항을 /works폴더에 markdown으로 생성해

## 화면 구성

### 화면 구성

```
┌───────────────────────┐
│   Root (ROSProvider)  │   ← rosbridge 연결·토큰 관리
└─────────┬─────────────┘
          ▼
┌──────────────────────────────────────────┐
│ Bottom-Tab Navigator                     │
│  ├─ [🏠 대시보드]  — 연결·배터리·카메라 미리보기 │
│  ├─ [📍 웨이포인트] — 지도 & 순찰 제어              │
│  ├─ [👣 따라오기]  — Follow 토글                   │
│  ├─ [🎙 음성 명령] — STT 버튼                     │
│  └─ [⚙️ 설정]      — Wi-Fi·토큰·OTA               │
└──────────────────────────────────────────┘
```

### 1. 대시보드(홈)

| 요소                       | 구현 메모                                   | ROS 토픽                               |
| -------------------------- | ------------------------------------------- | -------------------------------------- |
| 연결 상태 Indicator        | 🔴 Connecting / 🟢 Connected                | WebSocket 이벤트                       |
| 배터리 잔량                | ProgressBar + 숫자                          | `/battery_state`                       |
| 전면 카메라 미리보기(옵션) | 작은 LiveView 1개(320×180)                  | `/camera/color/thumbnail` (compressed) |
| “긴급 정지” 버튼           | `/cmd_vel` 0 publish & 서보 OFF 서비스 호출 | `/emergency_stop`                      |

### 2. 웨이포인트

| 구역                                   | 컴포넌트·UI                                                                               | 설명                                    |
| -------------------------------------- | ----------------------------------------------------------------------------------------- | --------------------------------------- |
| 상단 맵뷰                              | `react-native-maps` (2D) <br>– 실내면 단순 그리드·이미지 오버레이<br>– 실외면 Mapbox tile | 로봇 현재 위치 `/amcl_pose` 실시간 마커 |
| 웨이포인트 리스트 (좌측 슬라이드 패널) | Drag-reorderable `FlatList`                                                               | 각 아이템: 번호·X,Y·정지시간            |
| “+” Floating Action Button             | 맵을 탭 → 새 지점 추가                                                                    | 로컬 스테이트에 임시 저장               |
| 하단 Start / Stop 버튼                 | Nav2 **`/follow_waypoints`** 액션 Goal/Cancel                                             | 진행률 바 또는 순번 하이라이트          |
| 오버레이 Toast                         | “N번째 지점 도달” 등 이벤트 알림                                                          | Action feedback 콜백                    |

### 3. 따라오기

| UI                                        | 동작                                                       |                        |
| ----------------------------------------- | ---------------------------------------------------------- | ---------------------- |
| 화면 중앙 큰 ToggleButton (Follow / Stop) | 누르면 ROS Service `/start_follow` / `/stop_follow`        |                        |
| 세부 옵션 (작게)                          | “거리 유지 m” Slider → `/follow_distance` 파라미터 publish |                        |
| 상태표시                                  | “🟢 활성 / 🔴 중단 / ⚠️ Lost Person”                       | `/follow_status` topic |

### 4. 음성 명령

| 구성                      | 설명                                               |
| ------------------------- | -------------------------------------------------- |
| 중앙 Mic 버튼 (원형)      | 길게 누르는 동안 음성 수집 (`expo-av` + `vosk-rn`) |
| 스펙트럼 애니메이션       | 음성 수집 중 시각 피드백                           |
| 결과 텍스트 & 실행 피드백 | “➡️ 순찰 시작” 같은 간단 메시지                    |

### 5. 설정

| 섹션            | 항목                                     |
| --------------- | ---------------------------------------- |
| 로봇 목록       | IP·별명·토큰 (Add / Edit)                |
| 페어링 가이드   | “AP 모드로 부팅하는 방법” + QR 스캔 화면 |
| 펌웨어 업데이트 | 현재 버전, `.tar.gz` 업로드 & 진행률     |
| 앱 정보         | Build ID, 로그 전송, 문의 링크           |

### 6. 공통 컴포넌트 & 라이브러리 제안

| 목적          | 라이브러리                                     | 비고                   |
| ------------- | ---------------------------------------------- | ---------------------- |
| WebSocket ROS | **roslibjs (ESM)**                             | 번들 크기 < 110 KB     |
| 상태 관리     | **Zustand**                                    | 전역 `rosState` 저장   |
| UI Kit        | **Dripsy** 또는 **NativeBase**                 | Expo-friendly          |
| 애니메이션    | **react-native-reanimated v3**                 | 버튼 이펙트·Loader     |
| 지도          | **react-native-maps** (실내는 이미지 오버레이) | 실외 타일은 Mapbox SDK |

## 화면 구성: React Navigation의 Bottom-Tab + Stack(각 탭별 세부 화면) 패턴

| 레벨                     | 메뉴(화면)          | 핵심 기능 · 서브메뉴                                                                                                                                 |
| ------------------------ | ------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Bottom-Tab**<br>(①\~⑤) | ① **대시보드 🏠**   | • 연결 상태 / 배터리 / 카메라 썸네일<br>• “긴급 정지” 퀵버튼<br>• **Quick Action** 카드<br> – 순찰 시작 / 따라오기 시작 / 로봇 찾기                  |
|                          | ② **웨이포인트 📍** | • 맵(또는 그리드) + 현재 위치<br>• 웨이포인트 리스트 “＋” / 드래그 정렬<br>• **Start / Pause / Stop** 버튼<br>• 진행 상황 Toast                      |
|                          | ③ **따라오기 👣**   | • Follow 모드 토글 (큰 스위치)<br>• “거리 유지(m)” 슬라이더<br>• 상태 배지(Active / Lost / Error)                                                    |
|                          | ④ **음성 명령 🎙**   | • _Push-to-Talk_ 마이크 버튼<br>• STT 결과·실행 내역 로그                                                                                            |
|                          | ⑤ **설정 ⚙️**       | 1) **로봇 관리**<br> – 목록(추가·편집·삭제)<br>2) **네트워크/페어링 안내**<br>3) **펌웨어 업데이트**<br>4) **알림 설정**<br>5) **앱 정보·로그 전송** |

## 추가 내비게이션·UI 요소

| 위치                        | 내용                                                   | 이유                                  |
| --------------------------- | ------------------------------------------------------ | ------------------------------------- |
| **상단 AppBar**             | • 화면 제목<br>• 우측: 연결 아이콘(색상으로 상태 표시) | 어느 탭에서도 통신 상태를 한눈에 확인 |
| **FAB (웨이포인트 탭)**     | “＋” 새 지점 추가                                      | 터치 지점 저장을 직관화               |
| **Hamburger Drawer (선택)** | “로봇 전환” 빠른 메뉴                                  | 다중 로봇 운영 시 유용                |
| **Toast / Snackbar**        | “N번째 지점 도착”, “Follow Lost” 등                    | 사용자가 탭을 이동해도 이벤트 인지    |
